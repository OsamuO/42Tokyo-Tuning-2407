[mysqld]
# 基本設定
innodb_buffer_pool_size = 1G
innodb_redo_log_capacity = 256M
innodb_log_buffer_size = 32M
innodb_flush_log_at_trx_commit = 2
innodb_flush_method = O_DIRECT
innodb_file_per_table = ON
innodb_io_capacity = 200

# クエリパフォーマンス
max_connections = 151
thread_cache_size = 50
tmp_table_size = 64M
max_heap_table_size = 64M
sort_buffer_size = 4M
read_buffer_size = 2M
read_rnd_buffer_size = 4M
join_buffer_size = 4M
table_open_cache = 2000
table_definition_cache = 2000

# InnoDB設定
innodb_thread_concurrency = 0
innodb_read_io_threads = 4
innodb_write_io_threads = 4

# パフォーマンススキーマ
performance_schema = ON

# その他の最適化
skip-name-resolve = ON
max_allowed_packet = 16M

# バイナリログ設定
log_bin = mysql-bin
binlog_format = ROW

# セキュリティ設定（既存の設定を維持）
secure_file_priv = "/docker-entrypoint-initdb.d/csv"
lower_case_table_names = 1
